DROP TABLE book_status IF EXISTS;
DROP TABLE book_tag IF EXISTS;
DROP TABLE book IF EXISTS;
DROP TABLE status IF EXISTS;
DROP TABLE tag IF EXISTS;

CREATE TABLE status(
id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
text VARCHAR(32) NOT NULL,
PRIMARY KEY (id));

CREATE TABLE tag(
id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
text VARCHAR(32) NOT NULL,
PRIMARY KEY (id));

CREATE TABLE book(
id INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
title VARCHAR(128) NOT NULL,
path VARCHAR(128) NOT NULL,
status INTEGER NOT NULL,
PRIMARY KEY (id),
FOREIGN KEY (status) REFERENCES status(id));

CREATE TABLE book_status(
bid INTEGER NOT NULL,
sid INTEGER NOT NULL,
datetime TIMESTAMP,
FOREIGN KEY (bid) REFERENCES book(id),
FOREIGN KEY (sid) REFERENCES status(id));

CREATE TABLE book_tag(
bid INTEGER NOT NULL,
tid INTEGER NOT NULL,
FOREIGN KEY (bid) REFERENCES book(id),
FOREIGN KEY (tid) REFERENCES tag(id));


